{% extends "base.html" %}

{% block title %}Prediction History - NIDS{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Prediction History</h1>
    <p>Track your previous predictions and export your data.</p>
</div>

<div class="history-section">
    {% if predictions %}
        <h2>Your Recent Predictions</h2>
        <div class="mb-3">
            <a href="{{ url_for('history.download_history') }}" class="btn btn-outline-primary" style="box-shadow: none;">Download All History</a>
        </div>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Date & Time</th>
                    <th>Prediction</th>
                    <th>Confidence</th>
                    <th>Model Used</th>
                </tr>
            </thead>
            <tbody>
                {% for prediction in predictions %}
                <tr>
                    <td>{{ prediction.timestamp }}</td>
                    <td>{{ prediction.prediction }}</td>
                    <td>{{ prediction.confidence }}%</td>
                    <td>{{ prediction.model_used }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>You haven't made any predictions yet. Start by making your first prediction on the <a href="{{ url_for('predict_view') }}">Predict</a> page.</p>
    {% endif %}
</div>

<style>
/* History Specific Styles */
.history-section {
    padding-top: 1rem;
}

.table-striped {
    width: 100%;
    border-collapse: collapse;
}
.table-striped thead tr {
    background-color: #f1f5f9;
}
.table-striped th, .table-striped td {
    padding: 0.75rem 1rem;
    text-align: left;
    border-bottom: 1px solid #e2e8f0;
}

/* Mobile Responsiveness for History Table */
@media (max-width: 768px) {
    /* Make the table container horizontally scrollable */
    .history-section {
        overflow-x: auto;
    }

    .table-striped {
        min-width: 600px; /* Ensure table is wide enough to scroll */
    }
}
</style>
{% endblock %}
